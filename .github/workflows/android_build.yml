name: Build Android Debug APK

on:
  # কোড push করলে অটোমেটিক বিল্ড শুরু হবে
  push:
    branches: [ "main", "master" ]
  
  # গিটহাব ওয়েবসাইট থেকে ম্যানুয়ালি বাটন চেপে বিল্ড করার জন্য
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    # ১. আপনার কোড চেকআউট (ডাউনলোড) করা
    - name: Checkout code
      uses: actions/checkout@v4

    # ২. জাভা এনভায়রনমেন্ট সেটআপ (Android বিল্ডের জন্য জরুরি)
    - name: Set up JDK 17
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: gradle

    # ৩. gradlew ফাইলে এক্সিকিউট পারমিশন দেওয়া (লিনাক্স রানারের জন্য)
    - name: Grant execute permission for gradlew
      run: chmod +x gradlew

    # ৪. গ্রেডল দিয়ে ডিবাগ এপিকে বিল্ড করা
    - name: Build Debug APK
      run: ./gradlew assembleDebug

    # ৫. তৈরি হওয়া APK গিটহাবে আপলোড করা (যাতে আপনি ডাউনলোড করতে পারেন)
    - name: Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: app-debug
        path: app/build/outputs/apk/debug/app-debug.apk
        # বি:দ্র: আপনার মডিউলের নাম যদি 'app' না হয়ে অন্য কিছু হয়, তবে path পরিবর্তন করবেন।
